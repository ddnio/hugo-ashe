<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="theme-color" content="#e8e8e8">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">

  <title>{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }} - {{ site.Title }}{{ end }}</title>

  {{ $description := site.Params.description | default site.Title }}
  {{ if .IsPage }}
    {{ $description = .Params.summary | default (.Summary | plainify | truncate 160) }}
  {{ end }}
  <meta name="description" content="{{ $description }}">
  {{ if .Params.tags }}<meta name="keywords" content="{{ delimit .Params.tags `, ` }}">{{ end }}

  {{ $feature := .Params.feature | default `https://gw.alicdn.com/imgextra/i1/O1CN01BjlaXE1auDGoniJGl_!!6000000003389-2-tps-480-444.png` }}
  {{ if .Params.feature }}<link rel="preload" as="image" href="{{ .Params.feature }}" fetchpriority="high">{{ end }}

  <meta property="og:locale" content="{{ site.LanguageCode | default `zh-CN` }}">
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}">
  <meta property="og:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }} - {{ site.Title }}{{ end }}">
  <meta property="og:description" content="{{ $description }}">
  <meta property="og:url" content="{{ .Permalink }}">
  <meta property="og:site_name" content="{{ site.Title }}">
  <meta property="og:image" content="{{ $feature }}">
  {{ if .IsPage }}<meta property="article:published_time" content="{{ .Date.Format `2006-01-02T15:04:05-07:00` }}">{{ end }}

  <meta name="twitter:card" content="{{ if .Params.feature }}summary_large_image{{ else }}summary{{ end }}">
  {{ with site.Params.twitter }}<meta name="twitter:creator" content="@{{ . }}">{{ end }}
  <meta name="twitter:site" content="{{ site.BaseURL }}">
  <meta name="twitter:url" content="{{ .Permalink }}">
  <meta name="twitter:title" content="{{ if .IsHome }}{{ site.Title }}{{ else }}{{ .Title }} - {{ site.Title }}{{ end }}">
  <meta name="twitter:description" content="{{ $description }}">
  <meta name="twitter:image" content="{{ $feature }}">

  <link rel="canonical" href="{{ .Permalink }}">

  <link rel="dns-prefetch" href="https://gw.alipayobjects.com">
  <link rel="dns-prefetch" href="https://gw.alicdn.com">
  <link rel="preconnect" href="https://gw.alipayobjects.com" crossorigin>
  <link rel="preconnect" href="https://www.googletagmanager.com">
  <link rel="preconnect" href="https://giscus.app">
  <link rel="dns-prefetch" href="https://giscus.app">

  {{ $style := resources.Get "scss/main.scss" | resources.ToCSS (dict "targetPath" "css/index.css") }}
  <link rel="stylesheet" href="{{ $style.RelPermalink }}">
  <link rel="stylesheet" href="{{ `css/jinkai.css` | relURL }}">

  {{ if .IsPage }}
  <script src="{{ `js/lazysizes.min.js` | relURL }}" async defer></script>
  {{ end }}

  {{ $favicon := site.Params.favicon | default "/favicon.svg" }}
  <link rel="icon" href="{{ $favicon | relURL }}">
  <link rel="icon" type="image/svg+xml" href="{{ $favicon | relURL }}">
  <link rel="shortcut icon" href="{{ $favicon | relURL }}">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta http-equiv="cleartype" content="on">
  <meta name="format-detection" content="telephone=no">
  <meta name="author" content="{{ site.Params.name | default `Tw93` }}">
  <meta name="robots" content="index, follow">

  {{ with .OutputFormats.Get "RSS" }}
  <link href="{{ .RelPermalink }}" type="{{ .MediaType.Type }}" rel="alternate" title="{{ site.Title }} Feed">
  {{ end }}

  {{ if and (ne site.Params.analytics.googleAnalyticsID "") (or hugo.IsProduction (eq site.Params.env "production")) }}
  <script async src="https://www.googletagmanager.com/gtag/js?id={{ site.Params.analytics.googleAnalyticsID }}"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', '{{ site.Params.analytics.googleAnalyticsID }}');
  </script>
  {{ end }}

  {{ if site.Params.busuanzi.enable }}
  <script async src="{{ site.Params.busuanzi.scriptURL }}"></script>
  {{ end }}

  {{ if .IsPage }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "headline": {{ .Title | plainify | jsonify | safeJS }},
    "datePublished": "{{ .Date.Format `2006-01-02T15:04:05-07:00` }}",
    "dateModified": "{{ .Lastmod.Format `2006-01-02T15:04:05-07:00` }}",
    "author": {"@type": "Person", "name": {{ site.Params.name | default `Tw93` | plainify | jsonify | safeJS }}},
    "publisher": {"@type": "Organization", "name": {{ site.Title | plainify | jsonify | safeJS }}},
    "description": {{ $description | plainify | jsonify | safeJS }},
    "mainEntityOfPage": {"@type": "WebPage", "@id": {{ .Permalink | jsonify | safeJS }}},
    "url": {{ .Permalink | jsonify | safeJS }},
    "inLanguage": {{ site.LanguageCode | default `zh-CN` | jsonify | safeJS }}
  }
  </script>
  {{ else }}
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": {{ site.Title | plainify | jsonify | safeJS }},
    "url": {{ site.BaseURL | jsonify | safeJS }},
    "description": {{ $description | plainify | jsonify | safeJS }},
    "inLanguage": {{ site.LanguageCode | default `zh-CN` | jsonify | safeJS }},
    "potentialAction": {
      "@type": "SearchAction",
      "target": "{{ site.BaseURL }}index.json?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>
  {{ end }}

  {{ hugo.Generator }}
</head>
